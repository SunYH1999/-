webpackJsonp([5],{H9qz:function(e,t,o){var s=o("gA4h");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o("rjj0")("bef8db4c",s,!0,{})},LLpb:function(e,t,o){"use strict";function s(e){o("H9qz")}Object.defineProperty(t,"__esModule",{value:!0});var n=o("WShW"),a=o("lDTq"),i=o("VU/8"),l=s,r=i(n.a,a.a,!1,l,null,null);t.default=r.exports},WShW:function(e,t,o){"use strict";var s=o("mtWM"),n=o.n(s);t.a={data:function(){return{userInfo:{},homeInfo:{},avatar:"",examEdit:{editNick:""},otherReason:"",dialogTableVisible:!1,fengjinTime:"",fengjinReason:"",sex_type:"",age:"",selectedOptions:[],options:[{value:"nick",label:"昵称"},{value:"user_id",label:"用户ID"},{value:"phone",label:"手机号"}],value:"",input:""}},created:function(){this.convert()},methods:{searchRoomAvatar:function(){var e=this;this.userInfo&&this.userInfo.user_id&&(n.a.post("/op/user/room_info",{user_id:this.userInfo.user_id},{headers:{token:this.$store.state.token}}).then(function(t){console.log("房间信息"),console.log(t.data),console.log("房间信息");var o=t.data.data;0==o.sex_type?e.sex_type="女生":1==o.sex_type?e.sex_type="男生":2==o.sex_type?e.sex_type="不限":e.sex_type="",e.homeInfo=o}),n.a.post("/op/user/avatar",{user_id:this.userInfo.user_id},{headers:{token:this.$store.state.token}}).then(function(t){console.log("头像信息"),console.log(t.data),console.log("头像信息");var o=t.data.data;e.avatar=o,console.log("头像头像头像"),console.log(e.avatar),console.log("头像头像头像")}))},getAge:function(){if(this.userInfo&&this.userInfo.birthday){var e=new Date(this.userInfo.birthday.replace(/-/g,"/")),t=new Date,o=t.getFullYear()-e.getFullYear()-(t.getMonth()<e.getMonth()||t.getMonth()==e.getMonth()&&t.getDate()<e.getDate()?1:0);this.age=o}},addDialogClose:function(){this.$refs.addFormRef.resetFields()},edit:function(){var e=this;n.a.post("/op/user/update_info",{user_id:this.userInfo.user_id,nick:this.examEdit.editNick},{headers:{token:this.$store.state.token}}).then(function(t){0==t.data.errCode&&n.a.post("/op/user/info",{user_id:e.userInfo.user_id},{headers:{token:e.$store.state.token}}).then(function(t){if(0==t.data.errCode){var o=t.data.data;e.userInfo=o,e.$message.success("修改成功"),e.dialogTableVisible=!1,e.$refs.addFormRef.resetFields(),e.searchRoomAvatar()}})})},searchUser:function(){var e=this;if(console.log(this.value),console.log("查询用户"),"user_id"==this.value)n.a.post("/op/user/info",{user_id:parseInt(this.input)},{headers:{token:this.$store.state.token}}).then(function(t){console.log("查询框查询用户信息"),0!=t.data.errCode&&(alert("查询失败！"),window.location.reload()),console.log(t.data),console.log("查询框查询用户信息");var o=t.data.data;e.userInfo=o,e.getAge(),e.searchRoomAvatar()});else if("phone"==this.value){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/,o=t.test(this.input);o&&n.a.post("/op/user/info",{phone:this.input},{headers:{token:this.$store.state.token}}).then(function(t){console.log("查询框查询用户信息"),console.log(t.data),0!=t.data.errCode&&(alert("查询失败！"),window.location.reload()),console.log("查询框查询用户信息");var o=t.data.data;e.userInfo=o,e.getAge(),e.searchRoomAvatar()})}else"nick"==this.value?n.a.post("/op/user/info",{nick:this.input},{headers:{token:this.$store.state.token}}).then(function(t){console.log("查询框查询用户信息"),0!=t.data.errCode&&(alert("查询失败！"),window.location.reload()),console.log(t.data),console.log("查询框查询用户信息");var o=t.data.data;e.userInfo=o,e.getAge(),e.searchRoomAvatar()}):alert("请选择查询分类！")},banRoom:function(){var e=this;0==this.homeInfo.room_id?alert("该用户没有房间！"):this.$confirm("确定销毁房间？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.post("/lq/master/destory",{roomId:e.homeInfo.room_id,banType:1},{headers:{token:e.$store.state.token}}).then(function(t){console.log("销毁房间之后返回信息"),console.log(t.data),console.log("销毁房间之后返回信息"),n.a.post("/op/user/room_info",{user_id:e.userInfo.user_id},{headers:{token:e.$store.state.token}}).then(function(t){console.log("房间信息"),console.log(t.data),console.log("房间信息");var o=t.data.data;e.homeInfo=o})})})},ban:function(){var e=this;if(1==this.fengjinReason)var t="其他";else if(2==this.fengjinReason)var t="淫秽色情";else if(3==this.fengjinReason)var t="低俗内容";else if(4==this.fengjinReason)var t="骚扰谩骂";""==this.userInfo.status?""==this.fengjinTime||""==this.fengjinReason?alert("请选择封禁时间或理由！"):n.a.post("/op/user/audit",{user_id:parseInt(this.userInfo.user_id),status:5,ban_hour:parseInt(this.fengjinTime),ban_type:parseInt(this.fengjinReason),ban_desc:this.otherReason||t},{headers:{token:this.$store.state.token}}).then(function(t){0===t.data.errCode?(n.a.post("/op/user/info",{user_id:e.userInfo.user_id},{headers:{token:e.$store.state.token}}).then(function(t){console.log("封禁之后询用户信息"),console.log(t.data),console.log("封禁之后询用户信息");var o=t.data.data;e.userInfo=o,n.a.post("/lq/master/destory",{roomId:e.homeInfo.room_id},{headers:{token:e.$store.state.token}}).then(function(e){console.log("销毁房间之后返回信息"),console.log(e.data),console.log("销毁房间之后返回信息")})}),e.$message({showClose:!0,message:"封禁成功",type:"success"})):e.$message({showClose:!0,message:"封禁失败",type:"error"})}):5==this.userInfo.status&&n.a.post("/op/user/audit",{user_id:parseInt(this.userInfo.user_id),status:0},{headers:{token:this.$store.state.token}}).then(function(t){console.log(t.data),0===t.data.errCode?(n.a.post("/op/user/info",{user_id:e.userInfo.user_id},{headers:{token:e.$store.state.token}}).then(function(t){console.log("解封之后询用户信息"),console.log(t.data),console.log("解封之后询用户信息");var o=t.data.data;e.userInfo=o}),e.$message({showClose:!0,message:"解封成功",type:"success"})):e.$message({showClose:!0,message:"解封失败",type:"error"})})},handleClick:function(e){console.log(e),console.log(this)},convert:function(){var e=this,t=this.$store.state.token;console.log(1111),console.log(t),console.log(1111),n.a.post("/op/user/lasted_one",{},{headers:{token:this.$store.state.token}}).then(function(t){console.log("最后注册用户信息"),console.log(t.data),console.log("最后注册用户信息");var o=t.data.data;e.userInfo=o,e.getAge(),e.searchRoomAvatar()});this.$route.path;"/login"==this.$route.path&&console.clear()}}}},gA4h:function(e,t,o){t=e.exports=o("FZ+f")(!0),t.push([e.i,"\n.el-button{background-color:#42938d;color:white\n}\n.el-button:focus{background-color:#42938d;color:white\n}\n.el-button:hover{background-color:rgba(66,147,141,0.5);color:white\n}\n.el-card{height:300px !important;overflow:auto;width:100%\n}\n.el-avatar{background-color:white\n}\n.input-with-select{width:240px\n}\n.el-input .el-select{width:95px\n}\n.input-with-select .el-input-group__prepend{background-color:#fff\n}\n","",{version:3,sources:["/Users/edz/Documents/projs/building6-op-web/admin/src/pages/user/index/index.vue"],names:[],mappings:";AACA,WAAW,yBAAyB,WAAW;CAC9C;AACD,iBAAiB,yBAAyB,WAAW;CACpD;AACD,iBAAiB,sCAAsC,WAAW;CACjE;AACD,SAAS,wBAAwB,cAAc,UAAU;CACxD;AACD,WAAW,sBAAsB;CAChC;AACD,mBAAmB,WAAW;CAC7B;AACD,qBAAqB,UAAU;CAC9B;AACD,4CAA4C,qBAAqB;CAChE",file:"index.vue",sourcesContent:["\n.el-button{background-color:#42938d;color:white\n}\n.el-button:focus{background-color:#42938d;color:white\n}\n.el-button:hover{background-color:rgba(66,147,141,0.5);color:white\n}\n.el-card{height:300px !important;overflow:auto;width:100%\n}\n.el-avatar{background-color:white\n}\n.input-with-select{width:240px\n}\n.el-input .el-select{width:95px\n}\n.input-with-select .el-input-group__prepend{background-color:#fff\n}\n"],sourceRoot:""}])},lDTq:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{height:"100%"}},[o("div",{attrs:{align:"right"}},[o("el-input",{staticClass:"input-with-select",staticStyle:{"margin-bottom":"13px"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUser(t)}},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[o("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-button",{on:{click:e.searchUser}},[e._v("搜索")])],1),e._v(" "),o("div",[o("el-row",[o("el-col",{staticStyle:{"padding-right":"8px"},attrs:{span:6}},[o("el-card",{staticClass:"box-card"},[o("h3",[e._v("用户头像")]),e._v(" "),o("el-avatar",{attrs:{shape:"square",size:100,src:this.avatar}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-right":"8px"},attrs:{span:6}},[o("el-card",{staticClass:"box-card"},[o("h3",[e._v("用户个人信息")]),e._v(" "),this.userInfo?o("p",[e._v("用户id：    "+e._s(this.userInfo.user_id))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("UID：       "+e._s(this.userInfo.uid))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("昵称：      "+e._s(this.userInfo.nick))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("性别：      "+e._s(0==this.userInfo.sex?"女":"男"))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("年龄：      "+e._s(this.age))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("出生日期："+e._s(this.userInfo.birthday))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("地区：      "+e._s(this.userInfo.location))]):e._e(),e._v(" "),this.userInfo?o("p",[e._v("是否付费："+e._s(0==this.userInfo.is_pay?"否":"是"))]):e._e(),e._v(" "),o("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-edit"},on:{click:function(t){e.dialogTableVisible=!0}}})],1)],1),e._v(" "),o("el-dialog",{staticStyle:{margin:"10% auto"},attrs:{id:"bigReport",width:"400px",visible:e.dialogTableVisible,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{close:e.addDialogClose,"update:visible":function(t){e.dialogTableVisible=t}}},[o("el-form",{ref:"addFormRef",attrs:{model:e.examEdit}},[o("el-form-item",{staticStyle:{"text-align":"center"}},[o("el-input",{attrs:{placeholder:"请修改昵称"},model:{value:e.examEdit.editNick,callback:function(t){e.$set(e.examEdit,"editNick",t)},expression:"examEdit.editNick"}})],1),e._v(" "),o("el-form-item",{staticStyle:{"text-align":"center"}},[o("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("确定")])],1)],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-right":"8px"},attrs:{span:6}},[o("el-card",{staticClass:"box-card"},[o("h3",[e._v("用户行为数据")])])],1),e._v(" "),o("el-col",{staticStyle:{"padding-left":"0px"},attrs:{span:6}},[o("el-card",{staticClass:"box-card"},[o("h3",{staticStyle:{display:"block"}},[e._v("房间信息")]),e._v(" "),o("p",[e._v("房间id："+e._s(this.homeInfo.room_id))]),e._v(" "),o("p",[e._v("房间介绍："+e._s(this.homeInfo.description))]),e._v(" "),o("p",[e._v("房间限制："+e._s(this.sex_type))]),e._v(" "),o("el-button",{staticStyle:{"margin-top":"40px"},on:{click:e.banRoom}},[e._v("销毁房间")])],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-right":"8px","margin-top":"8px"},attrs:{span:12}},[o("el-card",{staticClass:"box-card"},[o("h3",[e._v("房间聊天信息")])])],1),e._v(" "),o("el-col",{staticStyle:{"padding-left":"3px","margin-top":"8px"},attrs:{span:12}},[o("el-card",{staticClass:"box-card"},[o("h3",[e._v("操作区")]),e._v(" "),o("div",[o("el-select",{staticStyle:{width:"110px","margin-bottom":"20px"},attrs:{placeholder:"封禁时间"},model:{value:e.fengjinTime,callback:function(t){e.fengjinTime=t},expression:"fengjinTime"}},[o("el-option",{attrs:{label:"一日封禁",value:"24"}}),e._v(" "),o("el-option",{attrs:{label:"七日封禁",value:"168"}}),e._v(" "),o("el-option",{attrs:{label:"永久封禁",value:"-100"}})],1),e._v(" "),o("el-select",{staticStyle:{width:"110px","margin-bottom":"20px"},attrs:{placeholder:"封禁原因"},model:{value:e.fengjinReason,callback:function(t){e.fengjinReason=t},expression:"fengjinReason"}},[o("el-option",{attrs:{label:"淫秽色情",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"低俗内容",value:"3"}}),e._v(" "),o("el-option",{attrs:{label:"骚扰谩骂",value:"4"}}),e._v(" "),o("el-option",{attrs:{label:"其他",value:"1"}})],1),e._v(" "),o("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"其他原因"},model:{value:e.otherReason,callback:function(t){e.otherReason=t},expression:"otherReason"}})],1),e._v(" "),o("el-button",{staticStyle:{width:"40%"},on:{click:e.ban}},[e._v("\n            "+e._s(0==this.userInfo.status?"封禁":"解封")+"\n          ")])],1)],1)],1)],1)])},n=[],a={render:s,staticRenderFns:n};t.a=a}});
//# sourceMappingURL=5.fb0c7d2c0090757933f9.js.map