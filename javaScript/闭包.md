# 闭包


[深度](https://blog.csdn.net/liao0801_123/article/details/82593335)


要理解闭包，首先必须理解Javascript特殊的变量作用域。 
变量的作用域无非就是两种：全局变量和局部变量。 
函数内部可以直接读取全局变量
在函数外部自然无法读取函数内的局部变量。 

有时候需要得到函数内的局部变量。
在函数的内部，再定义一个函数

```js
　　function f1(){ 
　　　　var n=999; 
　　　　function f2(){ 
　　　　　　alert(n); // 999 
　　　　} 
　　} 
```



在上面的代码中，函数f2就被包括在函数f1内部，这时f1内部的所有局部变量，对f2都是可见的。但是反过来就不行，f2内部的局部变量，对f1就是不可见的。这就是Javascript语言特有的”链式作用域”结构（chain scope），子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。 
既然f2可以读取f1中的局部变量，那么只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！ 



```js
　　function f1(){ 
　　　　var n=999; 
　　　　function f2(){ 
　　　　　　alert(n); 
　　　　} 
　　　　return f2; 
　　} 
　　var result=f1(); 
　　result(); // 999
```


上一节代码中的f2函数，就是闭包。 
各种专业文献上的”闭包”（closure）定义非常抽象，很难看懂。我的理解是，闭包就是能够读取其他函数内部变量的函数。 
由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成”定义在一个函数内部的函数”。 
所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。


